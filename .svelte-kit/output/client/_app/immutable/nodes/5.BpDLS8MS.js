import"../chunks/DsnmJJEf.js";import{F as de,n as ct,o as K,y as ue,W as ft,q as dt,k as c,v as ut,w as vt,x as Ce,z as ve,I as se,U as pt,aQ as mt,aA as Me,A as ht,aW as V,G as xe,aX as yt,K as bt,a7 as _t,aY as gt,aN as ke,aZ as xt,a_ as wt,aS as kt,ao as Ne,a$ as Et,B as je,D as $e,b0 as pe,b1 as At,aM as St,C as Tt,V as zt,b2 as et,P as Ct,b3 as Mt,Y as tt,h as Nt,aj as Pt,l as Ht,b4 as Lt,p as Wt,s as O,f as me,t as Q,a as P,b as Ut,c as q,aV as M,d as G,b5 as Dt,$ as Ft,r as U,aU as ne,a1 as Pe}from"../chunks/bNQyYDU7.js";import{c as It,o as Ot,d as Rt,e as qt,s as Z}from"../chunks/BZ3xhaWD.js";import{i as oe}from"../chunks/a6MJfn4m.js";import{h as Bt}from"../chunks/BnlD1kGp.js";import{s as he,r as Gt,a as He}from"../chunks/DrK46S25.js";import{t as Vt,c as Jt}from"../chunks/BRzKQYUk.js";import{p as Kt}from"../chunks/Dbw8gDSx.js";import{i as Yt,a as Qt,b as Xt,c as Zt}from"../chunks/BLF5Old3.js";import{r as jt}from"../chunks/y1z0ACOv.js";function $t(e,t){return t}function ea(e,t,s){for(var u=[],o=t.length,i,n=t.length,h=0;h<o;h++){let E=t[h];$e(E,()=>{if(i){if(i.pending.delete(E),i.done.add(E),i.pending.size===0){var g=e.outrogroups;we(ke(i.done)),g.delete(i),g.size===0&&(e.outrogroups=null)}}else n-=1},!1)}if(n===0){var l=u.length===0&&s!==null;if(l){var _=s,p=_.parentNode;St(p),p.append(_),e.items.clear()}we(t,!l)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function we(e,t=!0){for(var s=0;s<e.length;s++)Tt(e[s],t)}var Le;function ie(e,t,s,u,o,i=null){var n=e,h=new Map,l=(t&et)!==0;if(l){var _=e;n=K?ue(ft(_)):_.appendChild(de())}K&&dt();var p=null,E=_t(()=>{var m=s();return gt(m)?m:m==null?[]:ke(m)}),g,b=!0;function w(){a.fallback=p,ta(a,g,n,t,u),p!==null&&(g.length===0?(p.f&V)===0?je(p):(p.f^=V,ee(p,null,n)):$e(p,()=>{p=null}))}var N=ct(()=>{g=c(E);var m=g.length;let L=!1;if(K){var x=ut(n)===vt;x!==(m===0)&&(n=Ce(),ue(n),ve(!1),L=!0)}for(var y=new Set,A=ht,S=bt(),v=0;v<m;v+=1){K&&se.nodeType===pt&&se.data===mt&&(n=se,L=!0,ve(!1));var r=g[v],f=u(r,v),d=b?null:h.get(f);d?(d.v&&Me(d.v,r),d.i&&Me(d.i,v),S&&A.unskip_effect(d.e)):(d=aa(h,b?n:Le??=de(),r,f,v,o,t,s),b||(d.e.f|=V),h.set(f,d)),y.add(f)}if(m===0&&i&&!p&&(b?p=xe(()=>i(n)):(p=xe(()=>i(Le??=de())),p.f|=V)),m>y.size&&yt(),K&&m>0&&ue(Ce()),!b)if(S){for(const[T,z]of h)y.has(T)||A.skip_effect(z.e);A.oncommit(w),A.ondiscard(()=>{})}else w();L&&ve(!0),c(E)}),a={effect:N,items:h,outrogroups:null,fallback:p};b=!1,K&&(n=se)}function j(e){for(;e!==null&&(e.f&At)===0;)e=e.next;return e}function ta(e,t,s,u,o){var i=(u&Mt)!==0,n=t.length,h=e.items,l=j(e.effect.first),_,p=null,E,g=[],b=[],w,N,a,m;if(i)for(m=0;m<n;m+=1)w=t[m],N=o(w,m),a=h.get(N).e,(a.f&V)===0&&(a.nodes?.a?.measure(),(E??=new Set).add(a));for(m=0;m<n;m+=1){if(w=t[m],N=o(w,m),a=h.get(N).e,e.outrogroups!==null)for(const d of e.outrogroups)d.pending.delete(a),d.done.delete(a);if((a.f&V)!==0)if(a.f^=V,a===l)ee(a,null,s);else{var L=p?p.next:l;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),J(e,p,a),J(e,a,L),ee(a,L,s),p=a,g=[],b=[],l=j(p.next);continue}if((a.f&pe)!==0&&(je(a),i&&(a.nodes?.a?.unfix(),(E??=new Set).delete(a))),a!==l){if(_!==void 0&&_.has(a)){if(g.length<b.length){var x=b[0],y;p=x.prev;var A=g[0],S=g[g.length-1];for(y=0;y<g.length;y+=1)ee(g[y],x,s);for(y=0;y<b.length;y+=1)_.delete(b[y]);J(e,A.prev,S.next),J(e,p,A),J(e,S,x),l=x,p=S,m-=1,g=[],b=[]}else _.delete(a),ee(a,l,s),J(e,a.prev,a.next),J(e,a,p===null?e.effect.first:p.next),J(e,p,a),p=a;continue}for(g=[],b=[];l!==null&&l!==a;)(_??=new Set).add(l),b.push(l),l=j(l.next);if(l===null)continue}(a.f&V)===0&&g.push(a),p=a,l=j(a.next)}if(e.outrogroups!==null){for(const d of e.outrogroups)d.pending.size===0&&(we(ke(d.done)),e.outrogroups?.delete(d));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||_!==void 0){var v=[];if(_!==void 0)for(a of _)(a.f&pe)===0&&v.push(a);for(;l!==null;)(l.f&pe)===0&&l!==e.fallback&&v.push(l),l=j(l.next);var r=v.length;if(r>0){var f=(u&et)!==0&&n===0?s:null;if(i){for(m=0;m<r;m+=1)v[m].nodes?.a?.measure();for(m=0;m<r;m+=1)v[m].nodes?.a?.fix()}ea(e,v,f)}}i&&Ct(()=>{if(E!==void 0)for(a of E)a.nodes?.a?.apply()})}function aa(e,t,s,u,o,i,n,h){var l=(n&xt)!==0?(n&wt)===0?kt(s,!1,!1):Ne(s):null,_=(n&Et)!==0?Ne(o):null;return{v:l,i:_,e:xe(()=>(i(t,l??s,_??o,h),()=>{e.delete(u)}))}}function ee(e,t,s){if(e.nodes)for(var u=e.nodes.start,o=e.nodes.end,i=t&&(t.f&V)===0?t.nodes.start:s;u!==null;){var n=zt(u);if(i.before(u),u===o)return;u=n}}function J(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function We(e,t,s){tt(()=>{var u=Nt(()=>t(e,s?.())||{});if(s&&u?.update){var o=!1,i={};Pt(()=>{var n=s();Ht(n),o&&Lt(i,n)&&(i=n,u.update(n))}),o=!0}if(u?.destroy)return()=>u.destroy()})}function $(e,t,s,u,o,i){var n=e.__className;if(K||n!==s||n===void 0){var h=Vt(s,u,i);(!K||h!==e.getAttribute("class"))&&(h==null?e.removeAttribute("class"):e.className=h),e.__className=s}else if(i&&o!==i)for(var l in i){var _=!!i[l];(o==null||_!==!!o[l])&&e.classList.toggle(l,_)}return i}class ra{#e;#t;constructor(t,s){this.#e=t,this.#t=It(s)}get current(){return this.#t(),this.#e()}}const sa=/\(.+\)/,na=new Set(["all","print","screen","and","or","not","only"]);class oa extends ra{constructor(t,s){let u=sa.test(t)||t.split(/[\s,]+/).some(i=>na.has(i.trim()))?t:`(${t})`;const o=window.matchMedia(u);super(()=>o.matches,i=>Ot(o,"change",i))}}function ia(e){const t=JSON.parse(e);return t.data&&(t.data=Xt(t.data,Zt.decoders)),t}function ye(e){return HTMLElement.prototype.cloneNode.call(e)}function la(e,t=()=>{}){const s=async({action:o,result:i,reset:n=!0,invalidateAll:h=!0})=>{i.type==="success"&&(n&&HTMLFormElement.prototype.reset.call(e),h&&await Yt()),(location.origin+location.pathname===o.origin+o.pathname||i.type==="redirect"||i.type==="error")&&await Qt(i)};async function u(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:ye(e).method)!=="post")return;o.preventDefault();const n=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:ye(e).action),h=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:ye(e).enctype,l=new FormData(e,o.submitter),_=new AbortController;let p=!1;const g=await t({action:n,cancel:()=>p=!0,controller:_,formData:l,formElement:e,submitter:o.submitter})??s;if(p)return;let b;try{const w=new Headers({accept:"application/json","x-sveltekit-action":"true"});h!=="multipart/form-data"&&w.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(h)?h:"application/x-www-form-urlencoded");const N=h==="multipart/form-data"?l:new URLSearchParams(l),a=await fetch(n,{method:"POST",headers:w,cache:"no-store",body:N,signal:_.signal});b=ia(await a.text()),b.type==="error"&&(b.status=a.status)}catch(w){if(w?.name==="AbortError")return;b={type:"error",error:w}}await g({action:n,formData:l,formElement:e,update:w=>s({action:n,result:b,reset:w?.reset,invalidateAll:w?.invalidateAll}),result:b})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",u)}}}var Ue="mz3PUW_p",De=["#FFC700","#FF0000","#2E3191","#41BBC7"],Fe=3500,Ie=.5,Oe=150,Re="mix",qe=12,Be="",Ge=!0,Ve=800,Je=1600;function ca(e,t={}){let{colors:s=De,duration:u=Fe,force:o=Ie,particleCount:i=Oe,particleShape:n=Re,particleSize:h=qe,particleClass:l=Be,destroyAfterDone:_=Ge,stageHeight:p=Ve,stageWidth:E=Je}=t;(function(x){if(document.querySelector("style[data-neoconfetti]"))return;const y=be("style");y.dataset.neoconfetti="",y.textContent=x,_e(document.head,y)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",p+"px");let g=[],b=[];const w=()=>te(R()*(pa-1)),N=(x,y)=>n!=="rectangles"&&(x==="circles"||ma(y));function a(x,y){const A=w(),S=N(n,A),v=(d,T)=>x.style.setProperty(d,T+"");v("--xlp",ge(le(Xe(y,90)-180),0,180,-E/2,E/2)+"px"),v("--dc",u-te(1e3*R())+"ms");const r=R()<da?X(R()*ua,2):0;v("--x1",r),v("--x2",-1*r),v("--x3",r),v("--x4",X(le(ge(le(Xe(y,90)-180),0,180,-1,1)),4)),v("--y1",X(R()*Ye,4)),v("--y2",X(R()*o*(at()?1:-1),4)),v("--y3",Ye),v("--y4",X(va(ge(le(y-180),0,180,o,-o),0),4)),v("--w",(S?h:te(4*R())+h/2)+"px"),v("--h",(S?h:te(2*R())+h)+"px");const f=A.toString(2).padStart(3,"0").split("");v("--hr",f.map((d=>+d/2+"")).join(" ")),v("--r",f.join(" ")),v("--rd",X(R()*(fa-Ke)+Ke)+"ms"),v("--br",S?"50%":0)}let m;function L(){e.innerHTML="",clearTimeout(m),g=Qe(i,s),b=(function(x,y=[],A){const S=[];for(const{color:v}of y){const r=be("div");r.className=`${Ue} ${A}`,r.style.setProperty("--bgc",v);const f=be("div");_e(r,f),_e(x,r),S.push(r)}return S})(e,g,l);for(const[x,y]of Ze(b))a(y,g[+x].degree);m=setTimeout((()=>{_&&(e.innerHTML="")}),u)}return L(),{update(x){const y=x.particleCount??Oe,A=x.particleShape??Re,S=x.particleSize??qe,v=x.particleClass??Be,r=x.colors??De,f=x.stageHeight??Ve,d=x.duration??Fe,T=x.force??Ie,z=x.stageWidth??Je,C=x.destroyAfterDone??Ge;g=Qe(y,r);let k=!1;if(y===i){b=Array.from(e.querySelectorAll(`.${Ue}`));for(const[F,{color:D}]of Ze(g)){const I=b[+F];JSON.stringify(s)!==JSON.stringify(r)&&I.style.setProperty("--bgc",D),A!==n&&I.style.setProperty("--br",N(A,w())?"50%":"0"),v!==l&&(l&&I.classList.remove(l),v&&I.classList.add(v))}}else k=!0;_&&!C&&clearTimeout(m),e.style.setProperty("--sh",f+"px"),u=d,s=r,o=T,i=y,n=A,h=S,l=v,_=C,p=f,E=z,k&&L()},destroy(){e.innerHTML="",clearTimeout(m)}}}var Ke=200,fa=800,da=.1,ua=.3,Ye=.5,le=Math.abs,R=Math.random,te=Math.round,va=Math.max,be=e=>document.createElement(e),_e=(e,t)=>e.appendChild(t),Qe=(e,t)=>Array.from({length:e},((s,u)=>({color:t[u%t.length],degree:360*u/e}))),X=(e,t=2)=>te((e+Number.EPSILON)*10**t)/10**t,ge=(e,t,s,u,o)=>(e-t)*(o-u)/(s-t)+u,Xe=(e,t)=>e+t>360?e+t-360:e+t,at=()=>R()>.5,Ze=Object.entries,pa=6,ma=e=>e!==1&&at(),ha=q('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),ya=q('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),ba=q('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),_a=q('<p class="svelte-115oxdy"> </p>'),ga=q('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),xa=q('<button formaction="?/update" name="key"> </button>'),wa=q('<div class="row svelte-115oxdy"></div>'),ka=q('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),Ea=q('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Aa=q('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function Ua(e,t){Wt(t,!0);let s=Kt(t,"form",15);const u=new oa("(prefers-reduced-motion: reduce)");let o=M(()=>t.data.answers.at(-1)==="xxxxx"),i=M(()=>c(o)?-1:t.data.answers.length),n=M(()=>t.data.guesses[c(i)]||""),h=M(()=>c(n).length===5);const l=M(()=>{let r={},f={};return t.data.answers.forEach((d,T)=>{const z=t.data.guesses[T];for(let C=0;C<5;C+=1){const k=z[C];d[C]==="x"?(r[k]="exact",f[k]="correct"):r[k]||(r[k]=d[C]==="c"?"close":"missing",f[k]=d[C]==="c"?"present":"absent")}}),{classnames:r,description:f}}),_=M(()=>c(l).classnames),p=M(()=>c(l).description);function E(r){r.preventDefault();const f=r.target.getAttribute("data-key");f==="backspace"?(Pe(n,c(n).slice(0,-1)),s()?.badGuess&&s(s().badGuess=!1,!0)):c(n).length<5&&Pe(n,c(n)+f)}function g(r){r.metaKey||r.key==="Enter"&&!c(h)||document.querySelector(`[data-key="${r.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var b=Aa();qt("keydown",Dt,g),Bt("115oxdy",r=>{var f=ha();tt(()=>{Ft.title="Sverdle"}),P(r,f)});var w=O(me(b),2),N=G(w),a=O(N,2);let m;ie(a,20,()=>Array.from(Array(6).keys()),r=>r,(r,f)=>{const d=M(()=>f===c(i));var T=ba(),z=me(T),C=G(z);U(z);var k=O(z,2);let F;ie(k,20,()=>Array.from(Array(5).keys()),D=>D,(D,I)=>{const B=M(()=>c(d)?c(n):t.data.guesses[f]),H=M(()=>t.data.answers[f]?.[I]),ae=M(()=>c(B)?.[I]??""),rt=M(()=>c(d)&&I===c(B).length),Ee=M(()=>c(H)==="x"),Ae=M(()=>c(H)==="c"),Se=M(()=>c(H)==="_");var re=ya();let Te;var ze=G(re),ce=O(ze),st=G(ce);{var nt=W=>{var Y=ne("(correct)");P(W,Y)},ot=W=>{var Y=ne("(present)");P(W,Y)},it=W=>{var Y=ne("(absent)");P(W,Y)},lt=W=>{var Y=ne("empty");P(W,Y)};oe(st,W=>{c(Ee)?W(nt):c(Ae)?W(ot,1):c(Se)?W(it,2):W(lt,!1)})}U(ce);var fe=O(ce,2);Gt(fe),U(re),Q(()=>{Te=$(re,1,"letter svelte-115oxdy",null,Te,{exact:c(Ee),close:c(Ae),missing:c(Se),selected:c(rt)}),Z(ze,`${c(ae)??""} `),fe.disabled=!c(d),He(fe,c(ae))}),P(D,re)}),U(k),Q(()=>{Z(C,`Row ${f+1}`),F=$(k,1,"row svelte-115oxdy",null,F,{current:c(d)})}),P(r,T)}),U(a);var L=O(a,2),x=G(L);{var y=r=>{var f=ga(),d=me(f);{var T=k=>{var F=_a(),D=G(F);U(F),Q(()=>Z(D,`the answer was "${t.data.answer??""}"`)),P(k,F)};oe(d,k=>{!c(o)&&t.data.answer&&k(T)})}var z=O(d,2),C=G(z);U(z),Q(()=>Z(C,`${c(o)?"you won :)":"game over :("} play again?`)),P(r,f)},A=r=>{var f=ka(),d=G(f);let T;var z=O(d,2);z.__click=E;var C=O(z,2);ie(C,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],k=>k,(k,F)=>{var D=wa();ie(D,21,()=>F,$t,(I,B)=>{var H=xa();H.__click=E;var ae=G(H,!0);U(H),Q(()=>{he(H,"data-key",c(B)),$(H,1,Jt(c(_)[c(B)]),"svelte-115oxdy"),H.disabled=c(h),He(H,c(B)),he(H,"aria-label",`${c(B)??""} ${(c(p)[c(B)]||"")??""}`),Z(ae,c(B))}),P(I,H)}),U(D),P(k,D)}),U(f),Q(()=>{d.disabled=!c(h),T=$(d,1,"svelte-115oxdy",null,T,{selected:c(h)})}),P(r,f)};oe(x,r=>{c(o)||t.data.answers.length>=6?r(y):r(A,!1)})}U(L),U(w),We(w,(r,f)=>la?.(r,f),()=>()=>({update:r})=>{r({reset:!1})});var S=O(w,2);{var v=r=>{var f=Ea();We(f,(d,T)=>ca?.(d,T),()=>({particleCount:u.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),P(r,f)};oe(S,r=>{c(o)&&r(v)})}Q(r=>{he(N,"href",r),m=$(a,1,"grid svelte-115oxdy",null,m,{playing:!c(o),"bad-guess":s()?.badGuess})},[()=>jt("/sverdle/how-to-play")]),P(e,b),Ut()}Rt(["click"]);export{Ua as component};
